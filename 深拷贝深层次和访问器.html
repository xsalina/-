<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        
        function copy(obj) {
            let res = obj instanceof Array ? [] : {};
            console.log(7777, Object.entries(obj))
            for (const [k, v] of Object.entries(obj)) {
                res[k] = typeof v == 'object' ? copy(v) : v
                console.log(3333, res)
            }
            console.log(4444, res)

            return res;
        }
        const data = {
            name: 'huash',
            user: {
                name: 'xiaowi'
            }
        }
        let hd = copy(data)
        console.log(JSON.stringify(hd, null, 2));



        function User(name, age) {
            let data = { name, age };
            Object.defineProperties(this, {
                name: {
                    get() { 
                        return data.name
                     },
                    set(value) {
                        if (!value) {
                            console.log(6666, '姓名不能为空')
                            return
                        }
                        data.name = value;
                        console.log(2222, value)
                    }
                },
                age: {
                    get() {
                        return data.age
                    },
                    set(value) {
                        if (value >= 999 || value <= 0) {
                            console.log(6666, '年龄设置错误')
                            return
                        }
                        data.age = value
                    }
                }
            })
        }
        let xj = new User('拷卡', 22)
        xj.age =9999
        console.log(777,xj.age)


    </script>
</body>

</html>